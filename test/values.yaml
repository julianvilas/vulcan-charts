default:
  ingress: &ingress
    enabled: false
    tls: false

results:
  conf:
    linkBase: https://results.chart-example.local
  ingress:
    enabled: true
    hosts:
      - host: results.vulcan.local
        paths: [/]
    tls:
      - secretName: vulcan-results-tls
        hosts:
        - results.vulcan.local

stream:
  ingress:
    annotations:
      nginx.ingress.kubernetes.io/proxy-read-timeout: "3600"
      nginx.ingress.kubernetes.io/proxy-send-timeout: "3600"
    enabled: true
    hosts:
      - host: stream.vulcan.local
        paths: [/]
    tls:
      - secretName: vulcan-stream-tls
        hosts:
        - stream.vulcan.local

persistence:
  ingress:
    enabled: true
    hosts:
      - host: persistence.vulcan.local
        paths: [/]
    tls:
      - secretName: vulcan-persistence-tls
        hosts:
        - persistence.vulcan.local

api:
  conf:
    saml:
      callback: https://www.vulcan.local/api/v1/login/callback
      trustedDomains: '["www.vulcan.local"]'

  ingress:
    enabled: true
    annotations:
      nginx.ingress.kubernetes.io/proxy-body-size: 8m
    hosts:
      - host: www.vulcan.local
        paths: [/api]
    tls:
      - secretName: vulcan-api-tls
        hosts:
        - api.vulcan.local

crontinuous:
  conf:
    teamsWhitelistScan: '["team1", "team2"]'
    teamsWhitelistReport: '["team3"]'
  ingress:
    <<: *ingress

scanengine:
  ingress:
    <<: *ingress

ui:
  conf:
    apiUrl: https://www.vulcan.local/api/v1/
  ingress:
    enabled: true
    hosts:
      - host: www.vulcan.local
        paths: [/]
    tls:
      - secretName: vulcan-ui-tls
        hosts:
        - www.vulcan.local

insights:
  ingress:
    enabled: true
    annotations:
      nginx.ingress.kubernetes.io/configuration-snippet: |
        more_set_headers "X-Frame-Options: SAMEORIGIN";
        more_set_headers "X-Content-Type-Options: nosniff";
        more_set_headers "X-Frame-Options: DENY";
        more_set_headers "X-Xss-Protection: 1";
        more_set_headers "Strict-Transport-Security: max-age=31536000; includeSubDomains";
        more_set_headers "Content-Security-Policy: default-src 'none'; script-src 'self' 'unsafe-inline' https://insights.vulcan.local https://www.google-analytics.com; font-src 'self' https://insights.vulcan.local; connect-src 'self' https://insights.vulcan.local; img-src 'self' https://insights.vulcan.local https://www.google-analytics.com; style-src 'self' 'unsafe-inline' https://insights.vulcan.local; object-src 'none'";
    hosts:
      - host: insights.vulcan.local
        paths: [/]
    tls:
      - secretName: vulcan-insights-tls
        hosts:
        - insights.vulcan.local

reportsgenerator:
  conf:
    generators:
      scan:
        vulcanUi: http://www.vulcan.local/
        proxyEndpoint: http://insights.vulcan.local
    ses:
      cc: '["tbd@tbd.com"]'
  ingress:
    <<: *ingress

vulndbapi:
  ingress:
    enabled: true
    hosts:
      - host: vulndbapi.vulcan.local
        paths: [/]
    tls:
      - secretName: vulcan-vulndbapi-tls
        hosts:
        - vulndbapi.vulcan.local
